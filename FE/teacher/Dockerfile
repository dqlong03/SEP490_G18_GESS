# --------------------------
# üì¶ STAGE 1: BUILD
# --------------------------
FROM node:18-alpine AS build

# ƒê·∫∑t th∆∞ m·ª•c l√†m vi·ªác
WORKDIR /app

# Copy to√†n b·ªô code FE/teacher v√†o container
COPY . .

# C√†i ƒë·∫∑t dependencies
RUN npm install

# Build ·ª©ng d·ª•ng Next.js
RUN npm run build

# --------------------------
# üöÄ STAGE 2: RUNTIME
# --------------------------
FROM node:18-alpine

# T·∫°o th∆∞ m·ª•c app
WORKDIR /app

# Copy output t·ª´ stage build
COPY --from=build /app .

# M·ªü c·ªïng 3000 trong container
EXPOSE 3000

# Ch·∫°y ·ª©ng d·ª•ng (production)

CMD ["npm", "start"]
